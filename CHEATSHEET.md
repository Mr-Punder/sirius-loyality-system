# üìù –®–ø–∞—Ä–≥–∞–ª–∫–∞ Sirius

## üöÄ –°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ

### –ü–µ—Ä–≤—ã–π —Ä–∞–∑
```bash
make setup          # –°–æ–∑–¥–∞—Ç—å /opt/sirius
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –≤ /opt/sirius/config/
make deploy         # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë
make enable         # –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
```

### –ö–∞–∂–¥—ã–π –¥–µ–Ω—å
```bash
git pull            # –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
make deploy         # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
make logs           # –°–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
~/sirius-loyality-system/     ‚Üê –ö–æ–¥ (git) - —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π
  ‚îú‚îÄ‚îÄ server/                 ‚Üê Go –∫–æ–¥
  ‚îú‚îÄ‚îÄ local.yaml              ‚Üê –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  ‚îî‚îÄ‚îÄ local-config/           ‚Üê –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã

/opt/sirius/                  ‚Üê Production (–æ–±—â–∏–π, —á–µ—Ä–µ–∑ sudo)
  ‚îú‚îÄ‚îÄ bin/                    ‚Üê –ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ (–∫–æ–ø–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ make deploy)
  ‚îú‚îÄ‚îÄ config/                 ‚Üê –¢–æ–∫–µ–Ω—ã (—Å–æ–∑–¥–∞—ë—à—å –≤—Ä—É—á–Ω—É—é)
  ‚îú‚îÄ‚îÄ logs/                   ‚Üê –õ–æ–≥–∏
  ‚îî‚îÄ‚îÄ production.yaml         ‚Üê –ö–æ–Ω—Ñ–∏–≥ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å –æ–¥–∏–Ω —Ä–∞–∑)
```

**–í–∞–∂–Ω–æ:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å `/opt/sirius` –∏–¥—É—Ç —á–µ—Ä–µ–∑ `sudo`, –ø–æ—ç—Ç–æ–º—É –æ–±–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –º–æ–≥—É—Ç –¥–µ–ª–∞—Ç—å `make deploy` –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

---

## üîß –ö–æ–º–∞–Ω–¥—ã

### Production
| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|---------|------------|
| `make deploy` | –°–æ–±—Ä–∞—Ç—å + —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å + –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å (–≤—Å—ë –≤ –æ–¥–Ω–æ–º!) |
| `make build` | –¢–æ–ª—å–∫–æ —Å–æ–±—Ä–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ |
| `make install` | –¢–æ–ª—å–∫–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ /opt/sirius |
| `make restart` | –¢–æ–ª—å–∫–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã |
| `make logs` | –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ª–æ–≥–∏ |
| `make status` | –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ |
| `make enable` | –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ |

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|---------|------------|
| `make run-server` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ |
| `make run-userbot` | –ó–∞–ø—É—Å—Ç–∏—Ç—å userbot –ª–æ–∫–∞–ª—å–Ω–æ |
| `make run-adminbot` | –ó–∞–ø—É—Å—Ç–∏—Ç—å adminbot –ª–æ–∫–∞–ª—å–Ω–æ |

---

## üîÑ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±–Ω–æ–≤–∏–ª –∫–æ–¥
```bash
git pull
make deploy
# –ì–æ—Ç–æ–≤–æ!
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ß—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
make logs           # –°–º–æ—Ç—Ä–∏–º —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å
make restart        # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º
make status         # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò–∑–º–µ–Ω–∏–ª —Ç–æ–∫–µ–Ω—ã
```bash
nano /opt/sirius/config/token.txt
make restart
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –û–±–Ω–æ–≤–∏–ª –∫–æ–Ω—Ñ–∏–≥
```bash
nano /opt/sirius/production.yaml
make restart
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –¢–µ—Å—Ç–∏—Ä—É—é –ª–æ–∫–∞–ª—å–Ω–æ
```bash
nano local.yaml
make run-server
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
make run-userbot
```

---

## ‚ö° –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—Å–µ–≥–æ

```bash
make deploy
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
1. ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
2. ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å–µ—Ä–≤–∏—Å—ã
3. ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ `/opt/sirius`
4. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç systemd —Å–µ—Ä–≤–∏—Å—ã
5. ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë –∑–∞–Ω–æ–≤–æ
6. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å

---

## üÜò –ü–æ–º–æ—â—å

```bash
make help           # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
```
